<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>artofproof</title>

    <!-- Favicons -->
    <link rel="icon" href="favicon.ico" sizes="any">
    <link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

    <style>
      body {
        margin: 0;
        background: black;
        font-family: sans-serif;
      }
      #cornerLogo {
        position: fixed;
        top: 10px;
        left: 10px;
        width: 60px;
        height: auto;
        z-index: 1000;
      }
    </style>
  </head>
  <body>
    <!-- Top-left logo -->
    <img id="cornerLogo" src="invert.png" alt="Logo">

    <a-scene loading-screen="enabled: false"
             cursor="rayOrigin: mouse; fuse: false"
             raycaster="objects: .raycastable">

      <a-assets>
        <!-- Artworks -->
        <img id="art0" crossorigin="anonymous" src="https://raw.githubusercontent.com/artofproof/artofproof.github.io/main/art/images/114b7eb2-aa73-4012-a384-dfc5cb8bd0a6.png">
        <img id="art1" crossorigin="anonymous" src="https://raw.githubusercontent.com/artofproof/artofproof.github.io/main/art/images/205b28f0-a623-48e8-996a-04fd19c9df6a.png">
        <img id="art2" crossorigin="anonymous" src="https://raw.githubusercontent.com/artofproof/artofproof.github.io/main/art/images/4cd72a9c-ab47-460e-aa98-9dda68d7bfb2.png">
        <img id="art3" crossorigin="anonymous" src="https://raw.githubusercontent.com/artofproof/artofproof.github.io/main/art/images/8e48651d-fd26-4be3-9cec-7dec14b47bfd.png">
        <img id="art4" crossorigin="anonymous" src="https://raw.githubusercontent.com/artofproof/artofproof.github.io/main/art/images/e37460ef-dbb5-43a2-b844-d74ebed1c4bf.png">
        <img id="art5" crossorigin="anonymous" src="https://raw.githubusercontent.com/artofproof/artofproof.github.io/main/art/images/npub1q39st7du4ww4j8tr389nlw0snrwg5ctwvcdsdmhqy3prcesrwjvq6vnzug.png">

        <!-- Textures -->
        <img id="grassTexture" src="https://cdn.pixabay.com/photo/2015/03/26/09/54/grass-690300_1280.jpg">
        <img id="skyTexture" src="https://cdn.pixabay.com/photo/2016/03/09/09/30/sky-1245953_1280.jpg">
        <img id="logo" src="artofproof.png">
      </a-assets>

      <!-- Sky -->
      <a-sky src="#skyTexture" rotation="0 -90 0"></a-sky>

      <!-- Grass Floor (raycastable so users can tap it) -->
      <a-plane id="ground" class="raycastable" rotation="-90 0 0" width="50" height="50"
               src="#grassTexture" repeat="25 25"></a-plane>

      <!-- Gallery Row -->
      <a-entity id="gallery" position="0 1.6 -3">
        <a-entity id="art0-entity" position="-3 0 0" class="raycastable"
                  geometry="primitive: plane; width: 0.86; height: 1.16"
                  material="src: #art0; side: double"
                  onclick="showInfo('art0')"></a-entity>
        <a-entity id="art1-entity" position="-1.8 0 0" class="raycastable"
                  geometry="primitive: plane; width: 0.86; height: 1.16"
                  material="src: #art1; side: double"
                  onclick="showInfo('art1')"></a-entity>
        <a-entity id="art2-entity" position="-0.6 0 0" class="raycastable"
                  geometry="primitive: plane; width: 0.86; height: 1.16"
                  material="src: #art2; side: double"
                  onclick="showInfo('art2')"></a-entity>
        <a-entity id="art3-entity" position="0.6 0 0" class="raycastable"
                  geometry="primitive: plane; width: 0.86; height: 1.16"
                  material="src: #art3; side: double"
                  onclick="showInfo('art3')"></a-entity>
        <a-entity id="art4-entity" position="1.8 0 0" class="raycastable"
                  geometry="primitive: plane; width: 0.86; height: 1.16"
                  material="src: #art4; side: double"
                  onclick="showInfo('art4')"></a-entity>
        <a-entity id="art5-entity" position="3 0 0" class="raycastable"
                  geometry="primitive: plane; width: 0.86; height: 1.16"
                  material="src: #art5; side: double"
                  onclick="showInfo('art5')"></a-entity>
      </a-entity>

      <!-- Info Panel -->
      <a-entity id="infoPanel" visible="false">
        <!-- Enlarged Image -->
        <a-plane id="info-img" position="-3 10 -10" width="5" height="6"
                 material="src: #art0; side: double"></a-plane>

        <!-- Description Text to the RIGHT of the image -->
        <a-text id="info-text" value="" position="3 12 -10" align="left"
                width="12" color="white" wrap-count="60"></a-text>

        <!-- Clickable Link (npub) -->
        <a-entity id="info-link-entity" position="3 10 -10" class="raycastable"
                  geometry="primitive: plane; height: 0.4; width: 9"
                  material="transparent: true; opacity: 0">
          <a-text id="info-link" value="" align="left"
                  width="9" color="#a020f0"
                  animation="property: color; dir: alternate; dur: 800; loop: true; to: #ff00ff">
          </a-text>
        </a-entity>
      </a-entity>

      <!-- Camera Rig -->
      <a-entity id="cameraRig" position="0 1.6 0">
        <a-entity 
          id="camera" 
          camera 
          wasd-controls
          look-controls="touchEnabled: true; magicWindowTrackingEnabled: true;">
        </a-entity>
      </a-entity>

      <script>
        const infoPanel = document.querySelector("#infoPanel");
        const infoText = document.querySelector("#info-text");
        const infoLink = document.querySelector("#info-link");
        const infoLinkEntity = document.querySelector("#info-link-entity");
        const infoImg = document.querySelector("#info-img");
        const cameraRig = document.querySelector("#cameraRig");

        // Descriptions + Links
        const descriptions = {
          art0: { text: "Artwork 0 description goes here...", link: "#", npub: "" },
          art1: { text: "Artwork 1 description goes here...", link: "#", npub: "" },
          art2: { text: "Artwork 2 description goes here...", link: "#", npub: "" },
          art3: { text: "Artwork 3 description goes here...", link: "#", npub: "" },
          art4: {
            text: "Protocol Enforcer - A composed figure stares ahead, Bitcoin reflected in his eyes, representing the protocolâ€™s unwavering vigilance. The image captures the strength and resilience of the network, where cryptography and consensus work together to secure an immutable ledger, standing guard over the flow of digital value.",
            link: "https://nosta.me/npub16pg9ahu5el742q59ntnr0rwgwcffem4awjl2gxsguanvea0hk2ssrzjjsk",
            npub: "npub16pg9ahu5el742q59ntnr0rwgwcffem4awjl2gxsguanvea0hk2ssrzjjsk"
          },
          art5: {
            text: "Orphan from Hell - Orphan from Hell is a fierce, symbolic portrayal of rebellion and rejection, drawing inspiration from the concept of 'orphan blocks' in the Bitcoin whitepaper. The image features a demonic figure with glowing Bitcoin eyes, a broken horn, and a massive weapon, embodying the spirit of the outcast, rejected by consensus but burning with purpose. Raw and intense, this antihero channels the energy of those who fight from the fringes, wielding conviction like a weapon in a world that tried to leave them behind.",
            link: "https://nosta.me/npub1q39st7du4ww4j8tr389nlw0snrwg5ctwvcdsdmhqy3prcesrwjvq6vnzug",
            npub: "npub1q39st7du4ww4j8tr389nlw0snrwg5ctwvcdsdmhqy3prcesrwjvq6vnzug"
          }
        };

        function showInfo(id){
          infoImg.setAttribute("material", "src: #" + id + "; side: double");

          if(descriptions[id]){
            infoText.setAttribute("value", descriptions[id].text);
            infoLink.setAttribute("value", descriptions[id].npub);
            infoLinkEntity.onclick = () => {
              if (descriptions[id].link) window.open(descriptions[id].link, "_blank");
            };
          } else {
            infoText.setAttribute("value", "");
            infoLink.setAttribute("value", "");
            infoLinkEntity.onclick = null;
          }

          infoPanel.setAttribute("visible","true");
        }

        function hideInfo(){
          infoPanel.setAttribute("visible","false");
        }

        // ESC closes panel
        window.addEventListener('keydown', (e) => {
          if(e.key === "Escape"){ hideInfo(); }
        });

        // Tap-to-move
        const ground = document.querySelector("#ground");
        ground.addEventListener("click", (e) => {
          const intersect = e.detail.intersection;
          if (intersect) {
            const target = intersect.point;
            moveCameraTo(target);
          }
        });

        function moveCameraTo(target) {
          // Smooth movement
          const start = cameraRig.object3D.position.clone();
          const end = new THREE.Vector3(target.x, start.y, target.z); // keep same height
          let progress = 0;
          function animate() {
            progress += 0.02;
            if (progress >= 1) {
              cameraRig.object3D.position.copy(end);
              return;
            }
            cameraRig.object3D.position.lerpVectors(start, end, progress);
            requestAnimationFrame(animate);
          }
          animate();
        }
      </script>
    </a-scene>
  </body>
</html>
